<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · StateSpaceModels.jl</title><meta name="title" content="Manual · StateSpaceModels.jl"/><meta property="og:title" content="Manual · StateSpaceModels.jl"/><meta property="twitter:title" content="Manual · StateSpaceModels.jl"/><meta name="description" content="Documentation for StateSpaceModels.jl."/><meta property="og:description" content="Documentation for StateSpaceModels.jl."/><meta property="twitter:description" content="Documentation for StateSpaceModels.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StateSpaceModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Manual</a><ul class="internal"><li><a class="tocitem" href="#Quick-Start-Guide"><span>Quick Start Guide</span></a></li><li><a class="tocitem" href="#Models"><span>Models</span></a></li><li><a class="tocitem" href="#Naive-models"><span>Naive models</span></a></li><li><a class="tocitem" href="#Automatic-forecasting"><span>Automatic forecasting</span></a></li><li><a class="tocitem" href="#Systems"><span>Systems</span></a></li><li><a class="tocitem" href="#Hyperparameters"><span>Hyperparameters</span></a></li><li><a class="tocitem" href="#Filters-and-smoothers"><span>Filters and smoothers</span></a></li><li><a class="tocitem" href="#Fitting-and-Optimizers"><span>Fitting and Optimizers</span></a></li><li><a class="tocitem" href="#Forecasting-and-simulating"><span>Forecasting and simulating</span></a></li><li><a class="tocitem" href="#Visualization"><span>Visualization</span></a></li><li><a class="tocitem" href="#Datasets"><span>Datasets</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LAMPSPUC/StateSpaceModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/master/docs/src/manual.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Manual"><a class="docs-heading-anchor" href="#Manual">Manual</a><a id="Manual-1"></a><a class="docs-heading-anchor-permalink" href="#Manual" title="Permalink"></a></h1><h2 id="Quick-Start-Guide"><a class="docs-heading-anchor" href="#Quick-Start-Guide">Quick Start Guide</a><a id="Quick-Start-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Start-Guide" title="Permalink"></a></h2><p>Although StateSpaceModels.jl has a lot of functionalities, different models and interfaces  users usuallly just want to fit a model and analyse the residuals, components and make some forecasts. The following code is a quick start to perform these tasks</p><pre><code class="language-julia hljs">import Pkg

Pkg.add(&quot;StateSpaceModels&quot;)

using StateSpaceModels

y = randn(100)

model = LocalLevel(y)

fit!(model)

print_results(model)

forec = forecast(model, 10)

kf = kalman_filter(model)

v = get_innovations(kf)

ks = kalman_smoother(model)

alpha = get_smoothed_state(ks)

using Plots

plot(model, forec)

plotdiagnostics(kf)</code></pre><h2 id="Models"><a class="docs-heading-anchor" href="#Models">Models</a><a id="Models-1"></a><a class="docs-heading-anchor-permalink" href="#Models" title="Permalink"></a></h2><p>The package provides a variaty of pre-defined models. If there is any model that you wish was in the package, feel free to open an issue or pull request.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.UnobservedComponents"><a class="docstring-binding" href="#StateSpaceModels.UnobservedComponents"><code>StateSpaceModels.UnobservedComponents</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">UnobservedComponents(
    y::Vector{Fl}; 
    X::Matrix{Fl} = zeros(Fl, length(y), 0),
    trend::String = &quot;local level&quot;,
    seasonal::String = &quot;no&quot;
    cycle::String = &quot;no&quot;
) where Fl</code></pre><p>An unobserved components model that can have trend/level, seasonal and cycle components.  Each component should be specified by strings, if the component is not desired in the model  a string with &quot;no&quot; can be passed as keyword argument. </p><p>These models take the general form </p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
    y_t = \mu_t + \gamma_t + c_t + \varepsilon_t
    \end{aligned}
\end{gather*}\]</p><p>where <span>$y_t$</span> refers to the observation vector at time <span>$t$</span>, <span>$\mu_t$</span> refers to the trend component, <span>$\gamma_t$</span> refers to the seasonal component, <span>$c_t$</span> refers to the cycle, and <span>$\varepsilon_t$</span> is the irregular. The modeling details of these components are given below.</p><p><strong><strong>Trend</strong></strong></p><p>The trend component can be modeled in a lot of different ways, usually it is called level when there is no slope component. The modelling options can be expressed as in the example <code>trend = &quot;local level&quot;</code>.</p><ul><li>Local Level</li></ul><p>string: <code>&quot;local level&quot;</code></p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \varepsilon_{t} \quad \varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \eta_{t} \quad \eta_{t} \sim \mathcal{N}(0, \sigma^2_{\eta})\\
    \end{aligned}
\end{gather*}\]</p><ul><li>Random Walk</li></ul><p>string: <code>&quot;random walk&quot;</code></p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t}\\
        \mu_{t+1} &amp;= \mu_{t} + \eta_{t} \quad \eta_{t} \sim \mathcal{N}(0, \sigma^2_{\eta})\\
    \end{aligned}
\end{gather*}\]</p><ul><li>Local Linear Trend</li></ul><p>string: <code>&quot;local linear trend&quot;</code></p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \nu_{t} + \xi_{t} \quad &amp;\xi_{t} \sim \mathcal{N}(0, \sigma^2_{\xi})\\
        \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \sigma^2_{\zeta})\\
    \end{aligned}
\end{gather*}\]</p><ul><li>Smooth Trend</li></ul><p>string: <code>&quot;smooth trend&quot;</code></p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \nu_{t}\\
        \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \sigma^2_{\zeta})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Seasonal</strong></p><p>The seasonal component is modeled as:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
    \gamma_t = - \sum_{j=1}^{s-1} \gamma_{t+1-j} + \omega_t \quad \omega_t \sim N(0, \sigma^2_\omega)
    \end{aligned}
\end{gather*}\]</p><p>The periodicity (number of seasons) is s, and the defining character is that (without the error term), the seasonal components sum to zero across one complete cycle. The inclusion of an error term allows the seasonal effects to vary over time. The modelling options can be expressed in terms of <code>&quot;deterministic&quot;</code> or <code>&quot;stochastic&quot;</code> and the periodicity as a number in  the string, i.e., <code>seasonal = &quot;stochastic 12&quot;</code>.</p><p><strong>Cycle</strong></p><p>The cycle component is modeled as</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        c_{t+1} &amp;= \rho_c \left(c_{t} \cos(\lambda_c) + c_{t}^{*} \sin(\lambda_c)\right) \quad &amp; \tilde\omega_{t} \sim \mathcal{N}(0, \sigma^2_{\tilde\omega})\\
        c_{t+1}^{*} &amp;= \rho_c \left(-c_{t} \sin(\lambda_c) + c_{t}^{*} \sin(\lambda_c)\right) \quad &amp;\tilde\omega^*_{t} \sim \mathcal{N}(0, \sigma^2_{\tilde\omega})\\
    \end{aligned}
\end{gather*}\]</p><p>The cyclical component is intended to capture cyclical effects at time frames much longer  than captured by the seasonal component. The parameter <span>$\lambda_c$</span> is the frequency of the cycle and it is estimated via maximum likelihood. The inclusion of error terms allows the cycle effects to vary over time. The modelling options can be expressed in terms of <code>&quot;deterministic&quot;</code> or <code>&quot;stochastic&quot;</code> and the damping effect as a string, i.e.,  <code>cycle = &quot;stochastic&quot;</code>, <code>cycle = &quot;deterministic&quot;</code> or <code>cycle = &quot;stochastic damped&quot;</code>.</p><p>The UnobservedComponents model has some dedicated Plot Recipes, see <a href="#Visualization">Visualization</a></p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. Time Series Analysis by State Space Methods: Second Edition.  Oxford University Press, 2012</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/unobserved_components.jl#L109-L233">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.ExponentialSmoothing"><a class="docstring-binding" href="#StateSpaceModels.ExponentialSmoothing"><code>StateSpaceModels.ExponentialSmoothing</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ExponentialSmoothing(
    y::Vector{Fl}; 
    trend::Bool = false,
    damped_trend::Bool = false,
    seasonal::Int = 0
) where Fl</code></pre><p>Linear exponential smoothing models. These models are also known as ETS in the literature. This model is estimated using the Kalman filter for linear Gaussian state space models, for this reason the possible models are the following ETS with additive errors:</p><ul><li>ETS(A, N, N)</li><li>ETS(A, A, N)</li><li>ETS(A, Ad, N)</li><li>ETS(A, N, A)</li><li>ETS(A, A, A)</li><li>ETS(A, Ad, A)</li></ul><p>Other softwares have use the augmented least squares approach and have all the possible ETS  combinations. The Kalman filter approach might be slower than others but have the advantages of filtering the components.</p><p><strong>References</strong></p><ul><li>Hyndman, Rob, Anne B. Koehler, J. Keith Ord, and Ralph D. Snyder. Forecasting with exponential smoothing: the state space approach. Springer Science &amp; Business Media, 2008.</li><li>Hyndman, Robin John; Athanasopoulos, George.  Forecasting: Principles and Practice.  2nd ed. OTexts, 2018.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/exponential_smoothing.jl#L1-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.SARIMA"><a class="docstring-binding" href="#StateSpaceModels.SARIMA"><code>StateSpaceModels.SARIMA</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SARIMA(
    y::Vector{Fl}; 
    order::Tuple{Int,Int,Int} = (1, 0, 0), 
    seasonal_order::Tuple{Int, Int, Int, Int} = (0, 0, 0, 0),
    include_mean::Bool = false,
    suppress_warns::Bool = false
) where Fl</code></pre><p>A SARIMA model (Seasonal AutoRegressive Integrated Moving Average) implemented within the state-space framework.</p><p>The SARIMA model is specified <span>$(p, d, q) \times (P, D, Q, s)$</span>. We can also consider a polynomial <span>$A(t)$</span> to  model a trend, here we only allow to add a constante term with the <code>include_mean</code> keyword argument.    </p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        \phi_p (L) \tilde \phi_P (L^s) \Delta^d \Delta_s^D y_t = A(t) + \theta_q (L) \tilde \theta_Q (L^s) \zeta_t
    \end{aligned}
\end{gather*}\]</p><p>In terms of a univariate structural model, this can be represented as</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
    y_t &amp; = u_t + \eta_t \\
    \phi_p (L) \tilde \phi_P (L^s) \Delta^d \Delta_s^D u_t &amp; = A(t) + \theta_q (L) \tilde \theta_Q (L^s) \zeta_t
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = SARIMA(rand(100); order=(1,1,1), seasonal_order=(1,2,3,12))
SARIMA(1, 1, 1)x(1, 2, 3, 12) with zero mean</code></pre><p>See more on <a href="../examples/#Airline-passengers">Airline passengers</a></p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. Time Series Analysis by State Space Methods: Second Edition.  Oxford University Press, 2012</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/sarima.jl#L58-L101">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.DAR"><a class="docstring-binding" href="#StateSpaceModels.DAR"><code>StateSpaceModels.DAR</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DAR(y::Vector{Fl}, lags::Int) where Fl</code></pre><p>A Dynamic Autorregressive model is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;= \phi_0 + \sum_{i=1}^{lags} \phi_{i, t} y_{t - i} + \varepsilon_{t}  \quad \varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \phi_{i, t+1} &amp;= \phi_{i, t} + \eta{i, t}  \quad \eta{i, t} \sim \mathcal{N}(0, \sigma^2_{i, \eta})\\
    \end{aligned}
\end{gather*}\]</p><p>!!!! note System matrices     When building the system matrices we get rid of the first <code>lags</code> observations      in order to build all system matrices respecting the correspondent timestamps</p><p>!!! warning Forecasting     The dynamic autorregressive model does not have the <a href="#StateSpaceModels.forecast"><code>forecast</code></a> method implemented yet.      If you wish to perform forecasts with this model please open an issue.</p><p>!!! warning Missing values     The dynamic autorregressive model currently does not support missing values (<code>NaN</code> observations.)</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = DAR(randn(100), 2)
DAR</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/dar.jl#L1-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.BasicStructural"><a class="docstring-binding" href="#StateSpaceModels.BasicStructural"><code>StateSpaceModels.BasicStructural</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">BasicStructural(y::Vector{Fl}, s::Int) where Fl</code></pre><p>The basic structural state-space model consists of a trend (level + slope) and a seasonal component. It is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \gamma_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \nu_{t} + \xi_{t} \quad &amp;\xi_{t} \sim \mathcal{N}(0, \sigma^2_{\xi})\\
        \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \sigma^2_{\zeta})\\
        \gamma_{t+1} &amp;= -\sum_{j=1}^{s-1} \gamma_{t+1-j} + \omega_{t} \quad &amp; \omega_{t} \sim \mathcal{N}(0, \sigma^2_{\omega})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = BasicStructural(rand(100), 12)
BasicStructural</code></pre><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/basicstructural.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.BasicStructuralExplanatory"><a class="docstring-binding" href="#StateSpaceModels.BasicStructuralExplanatory"><code>StateSpaceModels.BasicStructuralExplanatory</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">BasicStructuralExplanatory(y::Vector{Fl}, s::Int, X::Matrix{Fl}) where Fl</code></pre><p>It is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \gamma_{t} + \beta_{t, i}X_{t, i} \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \nu_{t} + \xi_{t} \quad &amp;\xi_{t} \sim \mathcal{N}(0, \sigma^2_{\xi})\\
        \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \sigma^2_{\zeta})\\
        \gamma_{t+1} &amp;= -\sum_{j=1}^{s-1} \gamma_{t+1-j} + \omega_{t} \quad &amp; \omega_{t} \sim \mathcal{N}(0, \sigma^2_{\omega})\\
        \beta_{t+1} &amp;= \beta_{t}
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = BasicStructuralExplanatory(rand(100), 12, rand(100, 2))
BasicStructuralExplanatory</code></pre><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/basicstructural_explanatory.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LinearRegression"><a class="docstring-binding" href="#StateSpaceModels.LinearRegression"><code>StateSpaceModels.LinearRegression</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LinearRegression(X::Matrix{Fl}, y::Vector{Fl}) where Fl</code></pre><p>The linear regression state-space model is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  X_{1,t} \cdot \beta_{1,t} + \dots + X_{n,t} \cdot \beta_{n,t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \beta_{1,t+1} &amp;= \beta_{1,t}\\
        \dots &amp;= \dots\\
        \beta_{n,t+1} &amp;= \beta_{n,t}\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LinearRegression(rand(100, 2), rand(100))
LinearRegression</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/linear_regression.jl#L8-L28">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LocalLevel"><a class="docstring-binding" href="#StateSpaceModels.LocalLevel"><code>StateSpaceModels.LocalLevel</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LocalLevel(y::Vector{Fl}) where Fl</code></pre><p>The local level model is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \varepsilon_{t} \quad \varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \eta_{t} \quad \eta_{t} \sim \mathcal{N}(0, \sigma^2_{\eta})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevel(rand(100))
LocalLevel</code></pre><p>See more on <a href="../examples/#Nile-river-annual-flow">Nile river annual flow</a></p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press. pp. 9</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/locallevel.jl#L1-L24">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LocalLevelCycle"><a class="docstring-binding" href="#StateSpaceModels.LocalLevelCycle"><code>StateSpaceModels.LocalLevelCycle</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LocalLevelCycle(y::Vector{Fl}) where Fl</code></pre><p>The local level model with a cycle component is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + c_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \eta_{t} \quad &amp;\eta_{t} \sim \mathcal{N}(0, \sigma^2_{\eta})\\
        c_{t+1} &amp;= c_{t} \cos(\lambda_c) + c_{t}^{*} \sin(\lambda_c)\ \quad &amp; \tilde\omega_{t} \sim \mathcal{N}(0, \sigma^2_{\tilde\omega})\\
        c_{t+1}^{*} &amp;= -c_{t} \sin(\lambda_c) + c_{t}^{*} \sin(\lambda_c) \quad &amp;\tilde\omega^*_{t} \sim \mathcal{N}(0, \sigma^2_{\tilde\omega})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevelCycle(rand(100))
LocalLevelCycle</code></pre><p>See more on TODO RJ_TEMPERATURE</p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press. pp. 48</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/locallevelcycle.jl#L1-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LocalLevelExplanatory"><a class="docstring-binding" href="#StateSpaceModels.LocalLevelExplanatory"><code>StateSpaceModels.LocalLevelExplanatory</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LocalLevelExplanatory(y::Vector{Fl}, X::Matrix{Fl}) where Fl</code></pre><p>A local level model with explanatory variables is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + X_{1,t} \cdot \beta_{1,t} + \dots + X_{n,t} \cdot \beta_{n,t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \xi_{t} &amp;\xi_{t} \sim \mathcal{N}(0, \sigma^2_{\xi})\\
        \beta_{1,t+1} &amp;= \beta_{1,t} &amp;\tau_{1, t} \sim \mathcal{N}(0, \sigma^2_{\tau_{1}})\\
        \dots &amp;= \dots\\
        \beta_{n,t+1} &amp;= \beta_{n,t} &amp;\tau_{n, t} \sim \mathcal{N}(0, \sigma^2_{\tau_{n}})\\\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevelExplanatory(rand(100), rand(100, 1))
LocalLevelExplanatory</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/locallevelexplanatory.jl#L1-L22">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LocalLinearTrend"><a class="docstring-binding" href="#StateSpaceModels.LocalLinearTrend"><code>StateSpaceModels.LocalLinearTrend</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LocalLinearTrend(y::Vector{Fl}) where Fl</code></pre><p>The linear trend model is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  \mu_{t} + \gamma_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \sigma^2_{\varepsilon})\\
        \mu_{t+1} &amp;= \mu_{t} + \nu_{t} + \xi_{t} \quad &amp;\xi_{t} \sim \mathcal{N}(0, \sigma^2_{\xi})\\
        \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \sigma^2_{\zeta})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLinearTrend(rand(100))
LocalLinearTrend</code></pre><p>See more on <a href="../examples/#Finland-road-traffic-fatalities">Finland road traffic fatalities</a></p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods:  Second Edition.&quot; Oxford University Press. pp. 44</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/locallineartrend.jl#L1-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.MultivariateBasicStructural"><a class="docstring-binding" href="#StateSpaceModels.MultivariateBasicStructural"><code>StateSpaceModels.MultivariateBasicStructural</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MultivariateBasicStructural(y::Matrix{Fl}, s::Int) where Fl</code></pre><p>An implementation of a non-homogeneous seemingly unrelated time series equations for basic structural state-space model consists of trend (local linear trend) and seasonal components. It is defined by:</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
    y_{t} &amp;=  \mu_{t} + \gamma_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, \Sigma_{\varepsilon})\\
    \mu_{t+1} &amp;= \mu_{t} + \nu_{t} + \xi_{t} \quad &amp;\xi_{t} \sim \mathcal{N}(0, \Sigma_{\xi})\\
    \nu_{t+1} &amp;= \nu_{t} + \zeta_{t} \quad &amp;\zeta_{t} \sim \mathcal{N}(0, \Sigma_{\zeta})\\
    \gamma_{t+1} &amp;= -\sum_{j=1}^{s-1} \gamma_{t+1-j} + \omega_{t} \quad &amp; \omega_{t} \sim \mathcal{N}(0, \Sigma_{\omega})\\
    \end{aligned}
\end{gather*}\]</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = MultivariateBasicStructural(rand(100, 2), 12)
MultivariateBasicStructural</code></pre><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/basicstructural_multivariate.jl#L1-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.VehicleTracking"><a class="docstring-binding" href="#StateSpaceModels.VehicleTracking"><code>StateSpaceModels.VehicleTracking</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">VehicleTracking(y::Matrix{Fl}, ρ::Fl, H::Matrix{Fl}, Q::Matrix{Fl}) where Fl</code></pre><p>The vehicle tracking example illustrates a model where there are no hyperparameters,  the user defines the parameters <span>$\rho$</span>, <span>$H$</span> and <span>$Q$</span> and the model gives the predicted and filtered speed and position. In this case, <span>$y_t$</span> is a <span>$2 \times 1$</span> observation vector representing the corrupted measurements  of the vehicle&#39;s position on the two-dimensional plane in instant <span>$t$</span>.</p><p>The position and speed in each dimension compose the state of the vehicle. Let us refer to <span>$x_t^{(d)}$</span> as  the position on the axis <span>$d$</span> and to <span>$\dot{x}^{(d)}_t$</span> as the speed on the axis <span>$d$</span> in instant <span>$t$</span>. Additionally,  let <span>$\eta^{(d)}_t$</span> be the input drive force on the axis <span>$d$</span>, which acts as state noise. For a single dimension,  we can describe the vehicle dynamics as </p><p class="math-container">\[\begin{equation}
    \begin{aligned}
        &amp; x_{t+1}^{(d)} = x_t^{(d)} + \Big( 1 - \frac{\rho \Delta_t}{2} \Big) \Delta_t \dot{x}^{(d)}_t + \frac{\Delta^2_t}{2} \eta_t^{(d)}, \\
        &amp; \dot{x}^{(d)}_{t+1} = (1 - \rho) \dot{x}^{(d)}_{t} + \Delta_t \eta^{(d)}_t,
    \end{aligned}\label{eq_control}
\end{equation}\]</p><p>We can cast the dynamical system as a state-space model in the following manner:</p><p class="math-container">\[\begin{align*} 
    y_t &amp;= \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \end{bmatrix} \alpha_{t+1} + \varepsilon_t, \\
    \alpha_{t+1} &amp;= \begin{bmatrix} 1 &amp; (1 - \tfrac{\rho \Delta_t}{2}) \Delta_t &amp; 0 &amp; 0 \\ 0 &amp; (1 - \rho) &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; (1 - \tfrac{\rho \Delta_t}{2}) \\ 0 &amp; 0 &amp; 0 &amp; (1 - \rho) \end{bmatrix} \alpha_{t} + \begin{bmatrix} \tfrac{\Delta^2_t}{2} &amp; 0 \\ \Delta_t &amp; 0 \\ 0 &amp; \tfrac{\Delta^2_t}{2} \\ 0 &amp; \Delta_t \end{bmatrix} \eta_{t},
\end{align*}\]</p><p>See more on <a href="../examples/#Vehicle-tracking">Vehicle tracking</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/vehicle_tracking.jl#L1-L32">source</a></section></details></article><h2 id="Naive-models"><a class="docs-heading-anchor" href="#Naive-models">Naive models</a><a id="Naive-models-1"></a><a class="docs-heading-anchor-permalink" href="#Naive-models" title="Permalink"></a></h2><p>Naive models are not state space models but are good benchmarks for forecasting, for this reason we implemented them here.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.Naive"><a class="docstring-binding" href="#StateSpaceModels.Naive"><code>StateSpaceModels.Naive</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Naive(y::Vector{&lt;:Real})</code></pre><p>A naive model where the h step ahead forecast is </p><p class="math-container">\[y_{T+h|T} = y_T\]</p><p><strong>References</strong></p><ul><li>Hyndman, Rob J., Athanasopoulos, George. &quot;Forecasting: Principles and Practice&quot;</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/naive_models.jl#L22-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.SeasonalNaive"><a class="docstring-binding" href="#StateSpaceModels.SeasonalNaive"><code>StateSpaceModels.SeasonalNaive</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SeasonalNaive(y::Vector{&lt;:Real}, seasoanl::Int)</code></pre><p>A seasonal naive model where the h step ahead forecast is </p><p class="math-container">\[y_{T+h|T} = y_{T + h - m(k+1)}\]</p><p>where m is the seasonal period and k is the integer part of (h-1)/m.</p><p><strong>References</strong></p><ul><li>Hyndman, Rob J., Athanasopoulos, George. &quot;Forecasting: Principles and Practice&quot;</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/naive_models.jl#L88-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.ExperimentalSeasonalNaive"><a class="docstring-binding" href="#StateSpaceModels.ExperimentalSeasonalNaive"><code>StateSpaceModels.ExperimentalSeasonalNaive</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ExperimentalSeasonalNaive(y::Vector{&lt;:Real}, seasonal::Int; S::Int = 10_000)</code></pre><p>A seasonal naive model where the h step ahead forecast is the mean of the simulation  of S scenarios </p><p class="math-container">\[y_{T+h|T} = y_{T + h - m(k+1)} + \varepsilon_t\]</p><p>where m is the seasonal period, k is the integer part of (h-1)/m and <span>$\varepsilon_t$</span> is a sampled error. </p><p>We call it experimental because so far we could not find a good reference and implementation. If you know something please post it as an issue.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/naive_models.jl#L160-L173">source</a></section></details></article><h2 id="Automatic-forecasting"><a class="docs-heading-anchor" href="#Automatic-forecasting">Automatic forecasting</a><a id="Automatic-forecasting-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-forecasting" title="Permalink"></a></h2><p>Some models have various parameters and modelling options. The package provides simple functions that search through different parameters to obtain the best fit for your data without a deeper understanding. The search procedures can be published in scientific papers or purely heuristic designed by the developers. In any case if the documentation explains the procedures and indicates if there are any references.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.auto_ets"><a class="docstring-binding" href="#StateSpaceModels.auto_ets"><code>StateSpaceModels.auto_ets</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">auto_ets(y::Vector{Fl}; seasonal::Int = 0) where Fl</code></pre><p>Automatically fits the best <a href="#StateSpaceModels.ExponentialSmoothing"><code>ExponentialSmoothing</code></a> model according to the best AIC  between the models:</p><ul><li>ETS(A, N, N)</li><li>ETS(A, A, N)</li><li>ETS(A, Ad, N)</li></ul><p>If the user provides the time series seasonality it will search between the models</p><ul><li>ETS(A, N, A)</li><li>ETS(A, A, A)</li><li>ETS(A, Ad, A)</li></ul><p><strong>References</strong></p><ul><li>Hyndman, Robin John; Athanasopoulos, George. </li></ul><p>Forecasting: Principles and Practice.   2nd ed. OTexts, 2018.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/exponential_smoothing.jl#L293-L311">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.auto_arima"><a class="docstring-binding" href="#StateSpaceModels.auto_arima"><code>StateSpaceModels.auto_arima</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">auto_arima(y::Vector{Fl};
           seasonal::Int = 0,
           max_p::Int = 5,
           max_q::Int = 5,
           max_P::Int = 2,
           max_Q::Int = 2,
           max_d::Int = 2,
           max_D::Int = 1,
           max_order::Int = 5,
           information_criteria::String = &quot;aicc&quot;,
           allow_mean::Bool = true,
           show_trace::Bool = false,
           integration_test::String = &quot;kpss&quot;,
           seasonal_integration_test::String = &quot;seas&quot;
           ) where Fl</code></pre><p>Automatically fits the best <a href="#StateSpaceModels.SARIMA"><code>SARIMA</code></a> model according to the best information criteria </p><p><strong>TODO write example</strong></p><p><strong>References</strong></p><ul><li>Hyndman, RJ and Khandakar. </li></ul><p>Automatic time series forecasting: The forecast package for R. Journal of Statistical Software, 26(3), 2008.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/models/sarima.jl#L930-L956">source</a></section></details></article><h3 id="Implementing-a-custom-model"><a class="docs-heading-anchor" href="#Implementing-a-custom-model">Implementing a custom model</a><a id="Implementing-a-custom-model-1"></a><a class="docs-heading-anchor-permalink" href="#Implementing-a-custom-model" title="Permalink"></a></h3><p>Users are able to implement any custom user-defined model.</p><h2 id="Systems"><a class="docs-heading-anchor" href="#Systems">Systems</a><a id="Systems-1"></a><a class="docs-heading-anchor-permalink" href="#Systems" title="Permalink"></a></h2><p>The <code>StateSpaceModel</code> matrices are represented as a <code>StateSpaceSystem</code>.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.StateSpaceSystem"><a class="docstring-binding" href="#StateSpaceModels.StateSpaceSystem"><code>StateSpaceModels.StateSpaceSystem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">StateSpaceSystem</code></pre><p>Abstract type that unifies the definition of state space models matrices such as <span>$y, Z, d, T, c, R, H, Q$</span> for linear models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/systems.jl#L1-L6">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LinearUnivariateTimeInvariant"><a class="docstring-binding" href="#StateSpaceModels.LinearUnivariateTimeInvariant"><code>StateSpaceModels.LinearUnivariateTimeInvariant</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LinearUnivariateTimeInvariant{Fl}(
    y::Vector{Fl},
    Z::Vector{Fl},
    T::Matrix{Fl},
    R::Matrix{Fl},
    d::Fl,
    c::Vector{Fl},
    H::Fl,
    Q::Matrix{Fl},
) where Fl &lt;: AbstractFloat</code></pre><p>Definition of the system matrices <span>$y, Z, d, T, c, R, H, Q$</span> for linear univariate time invariant state space models.</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  Z\alpha_{t} + d + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, H)\\
        \alpha_{t+1} &amp;= T\alpha_{t} + c + R\eta_{t} \quad &amp;\eta_{t} \sim \mathcal{N}(0, Q)\\
    \end{aligned}
\end{gather*}\]</p><p>where:</p><ul><li><span>$y_{t}$</span> is a scalar</li><li><span>$Z$</span> is a <span>$m \times 1$</span> vector</li><li><span>$d$</span> is a scalar</li><li><span>$T$</span> is a <span>$m \times m$</span> matrix</li><li><span>$c$</span> is a <span>$m \times 1$</span> vector</li><li><span>$R$</span> is a <span>$m \times r$</span> matrix</li><li><span>$H$</span> is a scalar</li><li><span>$Q$</span> is a <span>$r \times r$</span> matrix</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/systems.jl#L11-L44">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LinearUnivariateTimeVariant"><a class="docstring-binding" href="#StateSpaceModels.LinearUnivariateTimeVariant"><code>StateSpaceModels.LinearUnivariateTimeVariant</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LinearUnivariateTimeVariant{Fl}(
    y::Vector{Fl},
    Z::Vector{Vector{Fl}},
    T::Vector{Matrix{Fl}},
    R::Vector{Matrix{Fl}},
    d::Vector{Fl},
    c::Vector{Vector{Fl}},
    H::Vector{Fl},
    Q::Vector{Matrix{Fl}},
) where Fl &lt;: AbstractFloat</code></pre><p>Definition of the system matrices <span>$y, Z, d, T, c, R, H, Q$</span> for linear univariate time variant state space models.</p><p class="math-container">\[\begin{gather*}
    \begin{aligned}
        y_{t} &amp;=  Z_{t}\alpha_{t} + d_{t} + \varepsilon_{t} \quad &amp;\varepsilon_{t} \sim \mathcal{N}(0, H_{t})\\
        \alpha_{t+1} &amp;= T_{t}\alpha_{t} + c_{t} + R_{t}\eta_{t} \quad &amp;\eta_{t} \sim \mathcal{N}(0, Q_{t})\\
    \end{aligned}
\end{gather*}\]</p><p>where:</p><ul><li><span>$y_{t}$</span> is a scalar</li><li><span>$Z_{t}$</span> is a <span>$m \times 1$</span> vector</li><li><span>$d_{t}$</span> is a scalar</li><li><span>$T_{t}$</span> is a <span>$m \times m$</span> matrix</li><li><span>$c_{t}$</span> is a <span>$m \times 1$</span> vector</li><li><span>$R_{t}$</span> is a <span>$m \times r$</span> matrix</li><li><span>$H_{t}$</span> is a scalar</li><li><span>$Q_{t}$</span> is a <span>$r \times r$</span> matrix</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/systems.jl#L84-L117">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LinearMultivariateTimeInvariant"><a class="docstring-binding" href="#StateSpaceModels.LinearMultivariateTimeInvariant"><code>StateSpaceModels.LinearMultivariateTimeInvariant</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>TODO</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/systems.jl#L156-L158">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.LinearMultivariateTimeVariant"><a class="docstring-binding" href="#StateSpaceModels.LinearMultivariateTimeVariant"><code>StateSpaceModels.LinearMultivariateTimeVariant</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>TODO</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/systems.jl#L189-L191">source</a></section></details></article><h2 id="Hyperparameters"><a class="docs-heading-anchor" href="#Hyperparameters">Hyperparameters</a><a id="Hyperparameters-1"></a><a class="docs-heading-anchor-permalink" href="#Hyperparameters" title="Permalink"></a></h2><p>The model hyperparameters are constant (non-time-varying) parameters that are optimized when <a href="#StateSpaceModels.fit!"><code>fit!</code></a> is called. The package provides some useful functions to accelerate experimentation and custom model development.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.HyperParameters"><a class="docstring-binding" href="#StateSpaceModels.HyperParameters"><code>StateSpaceModels.HyperParameters</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>TODO</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L1-L3">source</a></section></details></article><p>The getters are:</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_names"><a class="docstring-binding" href="#StateSpaceModels.get_names"><code>StateSpaceModels.get_names</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_names(model::StateSpaceModel)</code></pre><p>Get the names of the hyperparameters registered on a <code>StateSpaceModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L87-L91">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.number_hyperparameters"><a class="docstring-binding" href="#StateSpaceModels.number_hyperparameters"><code>StateSpaceModels.number_hyperparameters</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">number_hyperparameters(model::StateSpaceModel)</code></pre><p>Get the number of hyperparameters registered on a <code>StateSpaceModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L96-L100">source</a></section></details></article><p>The setters are:</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.fix_hyperparameters!"><a class="docstring-binding" href="#StateSpaceModels.fix_hyperparameters!"><code>StateSpaceModels.fix_hyperparameters!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">fix_hyperparameters!(model::StateSpaceModel, fixed_hyperparameters::Dict)</code></pre><p>Fixes the desired hyperparameters so that they are not considered as decision variables in the model estimation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevel(rand(100))
LocalLevel

julia&gt; get_names(model)
2-element Vector{String}:
 &quot;sigma2_ε&quot;
 &quot;sigma2_η&quot;

julia&gt; fix_hyperparameters!(model, Dict(&quot;sigma2_ε&quot; =&gt; 100.0))
LocalLevel

julia&gt; model.hyperparameters.fixed_constrained_values
Dict{String, Float64} with 1 entry:
  &quot;sigma2_ε&quot; =&gt; 100.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L251-L274">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.set_initial_hyperparameters!"><a class="docstring-binding" href="#StateSpaceModels.set_initial_hyperparameters!"><code>StateSpaceModels.set_initial_hyperparameters!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">set_initial_hyperparameters!(model::StateSpaceModel,
                             initial_hyperparameters::Dict{String, &lt;:Real})</code></pre><p>Fill a model with user inputed initial points for hyperparameter optimzation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevel(rand(100))
LocalLevel

julia&gt; get_names(model)
2-element Vector{String}:
 &quot;sigma2_ε&quot;
 &quot;sigma2_η&quot;

julia&gt; set_initial_hyperparameters!(model, Dict(&quot;sigma2_η&quot; =&gt; 100.0))
LocalLevel

julia&gt; model.hyperparameters.constrained_values
2-element Vector{Float64}:
 NaN  
 100.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L189-L213">source</a></section></details></article><p>Mappings:</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.constrain_variance!"><a class="docstring-binding" href="#StateSpaceModels.constrain_variance!"><code>StateSpaceModels.constrain_variance!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">constrain_variance!(model::StateSpaceModel, str::String)</code></pre><p>Map a constrained hyperparameter <span>$\psi \in \mathbb{R}^+$</span> to an unconstrained hyperparameter <span>$\psi_* \in \mathbb{R}$</span>.</p><p>The mapping is <span>$\psi = \psi_*^2$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L351-L359">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.unconstrain_variance!"><a class="docstring-binding" href="#StateSpaceModels.unconstrain_variance!"><code>StateSpaceModels.unconstrain_variance!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">unconstrain_variance!(model::StateSpaceModel, str::String)</code></pre><p>Map an unconstrained hyperparameter <span>$\psi_{*} \in \mathbb{R}$</span> to a constrained hyperparameter  <span>$\psi \in \mathbb{R}^+$</span>.</p><p>The mapping is <span>$\psi_{*} = \sqrt{\psi}$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L365-L372">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.constrain_box!"><a class="docstring-binding" href="#StateSpaceModels.constrain_box!"><code>StateSpaceModels.constrain_box!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">constrain_box!(model::StateSpaceModel, str::String, lb::Fl, ub::Fl) where Fl</code></pre><p>Map a constrained hyperparameter <span>$\psi \in [lb, ub]$</span> to an unconstrained hyperparameter <span>$\psi_* \in \mathbb{R}$</span>.</p><p>The mapping is <span>$\psi = lb + \frac{ub - lb}{1 + \exp(-\psi_{*})}$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L317-L325">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.unconstrain_box!"><a class="docstring-binding" href="#StateSpaceModels.unconstrain_box!"><code>StateSpaceModels.unconstrain_box!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">unconstrain_box!(model::StateSpaceModel, str::String, lb::Fl, ub::Fl) where Fl</code></pre><p>Map an unconstrained hyperparameter <span>$\psi_* \in \mathbb{R}$</span> to a constrained hyperparameter <span>$\psi \in [lb, ub]$</span>.</p><p>The mapping is <span>$\psi_* = -\ln \frac{ub - lb}{\psi - lb} - 1$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L334-L342">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.constrain_identity!"><a class="docstring-binding" href="#StateSpaceModels.constrain_identity!"><code>StateSpaceModels.constrain_identity!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">constrain_identity!(model::StateSpaceModel, str::String)</code></pre><p>Map an constrained hyperparameter <span>$\psi \in \mathbb{R}$</span> to an unconstrained hyperparameter <span>$\psi_* \in \mathbb{R}$</span>. This function is necessary to copy values from a location to another inside <code>HyperParameters</code></p><p>The mapping is <span>$\psi = \psi_*$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L378-L387">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.unconstrain_identity!"><a class="docstring-binding" href="#StateSpaceModels.unconstrain_identity!"><code>StateSpaceModels.unconstrain_identity!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">unconstrain_identity!(model::StateSpaceModel, str::String)</code></pre><p>Map an unconstrained hyperparameter <span>$\psi_* \in \mathbb{R}$</span> to a constrained hyperparameter <span>$\psi \in \mathbb{R}$</span>. This function is necessary to copy values from a location to another inside <code>HyperParameters</code></p><p>The mapping is <span>$\psi_* = \psi$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L393-L402">source</a></section></details></article><h2 id="Filters-and-smoothers"><a class="docs-heading-anchor" href="#Filters-and-smoothers">Filters and smoothers</a><a id="Filters-and-smoothers-1"></a><a class="docs-heading-anchor-permalink" href="#Filters-and-smoothers" title="Permalink"></a></h2><p>StateSpaceModels.jl lets users define tailor-made filters in an easy manner.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.UnivariateKalmanFilter"><a class="docstring-binding" href="#StateSpaceModels.UnivariateKalmanFilter"><code>StateSpaceModels.UnivariateKalmanFilter</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">UnivariateKalmanFilter{Fl &lt;: AbstractFloat}</code></pre><p>A Kalman filter that is tailored to univariate systems, exploiting the fact that the dimension of the observations at any time period is 1.</p><p><strong>TODO equations and descriptions of a1 and P1</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/filters/univariate_kalman_filter.jl#L66-L73">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.ScalarKalmanFilter"><a class="docstring-binding" href="#StateSpaceModels.ScalarKalmanFilter"><code>StateSpaceModels.ScalarKalmanFilter</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ScalarKalmanFilter{Fl &lt;: Real} &lt;: KalmanFilter</code></pre><p>Similar to the univariate Kalman filter but exploits the fact that the dimension of the state is equal to 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/filters/scalar_kalman_filter.jl#L50-L55">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.SparseUnivariateKalmanFilter"><a class="docstring-binding" href="#StateSpaceModels.SparseUnivariateKalmanFilter"><code>StateSpaceModels.SparseUnivariateKalmanFilter</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SparseUnivariateKalmanFilter{Fl &lt;: AbstractFloat}</code></pre><p>A Kalman filter that is tailored to sparse univariate systems, exploiting the fact that the dimension of the observations at any time period is 1 and that Z, T and R are sparse.</p><p><strong>TODO equations and descriptions of a1 and P1</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/filters/sparse_univariate_kalman_filter.jl#L60-L67">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.MultivariateKalmanFilter"><a class="docstring-binding" href="#StateSpaceModels.MultivariateKalmanFilter"><code>StateSpaceModels.MultivariateKalmanFilter</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>TODO</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/filters/multivariate_kalman_filter.jl#L57-L59">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.FilterOutput"><a class="docstring-binding" href="#StateSpaceModels.FilterOutput"><code>StateSpaceModels.FilterOutput</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FilterOutput{Fl&lt;:Real}</code></pre><p>Structure with the results of the Kalman filter:</p><ul><li><code>v</code>: innovations</li><li><code>F</code>: variance of innovations</li><li><code>a</code>: predictive state</li><li><code>att</code>: filtered state</li><li><code>P</code>: variance of predictive state</li><li><code>Ptt</code>: variance of filtered state</li><li><code>Pinf</code>: diffuse part of the covariance</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L55-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.SmootherOutput"><a class="docstring-binding" href="#StateSpaceModels.SmootherOutput"><code>StateSpaceModels.SmootherOutput</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SmootherOutput{Fl&lt;:Real}</code></pre><p>Structure with the results of the smoother:</p><ul><li><code>alpha</code>: smoothed state</li><li><code>V</code>: variance of smoothed state</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L233-L239">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.kalman_filter"><a class="docstring-binding" href="#StateSpaceModels.kalman_filter"><code>StateSpaceModels.kalman_filter</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">kalman_filter(model::StateSpaceModel; filter::KalmanFilter=default_filter(model)) -&gt; FilterOutput</code></pre><p>Filter the data using the desired <code>filter</code> and the estimated hyperparameters in <code>model</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L216-L220">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.kalman_smoother"><a class="docstring-binding" href="#StateSpaceModels.kalman_smoother"><code>StateSpaceModels.kalman_smoother</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">kalman_smoother(model::StateSpaceModel; filter::KalmanFilter=default_filter(model)) -&gt; FilterOutput</code></pre><p>Apply smoother to data filtered by <code>filter</code> and the estimated hyperparameters in <code>model</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L254-L258">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_innovations"><a class="docstring-binding" href="#StateSpaceModels.get_innovations"><code>StateSpaceModels.get_innovations</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_innovations</code></pre><p>Returns the innovations <code>v</code> obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L126-L130">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_innovations_variance"><a class="docstring-binding" href="#StateSpaceModels.get_innovations_variance"><code>StateSpaceModels.get_innovations_variance</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_innovations_variance</code></pre><p>Returns the variance <code>F</code> of innovations obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L142-L146">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_filtered_state"><a class="docstring-binding" href="#StateSpaceModels.get_filtered_state"><code>StateSpaceModels.get_filtered_state</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_filtered_state</code></pre><p>Returns the filtered state <code>att</code> obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L158-L162">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_filtered_state_variance"><a class="docstring-binding" href="#StateSpaceModels.get_filtered_state_variance"><code>StateSpaceModels.get_filtered_state_variance</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_filtered_state_variance</code></pre><p>Returns the variance <code>Ptt</code> of the filtered state obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L174-L178">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_predictive_state"><a class="docstring-binding" href="#StateSpaceModels.get_predictive_state"><code>StateSpaceModels.get_predictive_state</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_predictive_state</code></pre><p>Returns the predictive state <code>a</code> obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L188-L192">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_predictive_state_variance"><a class="docstring-binding" href="#StateSpaceModels.get_predictive_state_variance"><code>StateSpaceModels.get_predictive_state_variance</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_predictive_state_variance</code></pre><p>Returns the variance <code>P</code> of the predictive state obtained with the Kalman filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L202-L206">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_smoothed_state"><a class="docstring-binding" href="#StateSpaceModels.get_smoothed_state"><code>StateSpaceModels.get_smoothed_state</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_smoothed_state</code></pre><p>Returns the smoothed state <code>alpha</code> obtained with the smoother.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L266-L270">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.get_smoothed_state_variance"><a class="docstring-binding" href="#StateSpaceModels.get_smoothed_state_variance"><code>StateSpaceModels.get_smoothed_state_variance</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_smoothed_state_variance</code></pre><p>Returns the variance <code>V</code> of the smoothed state obtained with the smoother.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/kalman_filter_and_smoother.jl#L280-L284">source</a></section></details></article><h2 id="Fitting-and-Optimizers"><a class="docs-heading-anchor" href="#Fitting-and-Optimizers">Fitting and Optimizers</a><a id="Fitting-and-Optimizers-1"></a><a class="docs-heading-anchor-permalink" href="#Fitting-and-Optimizers" title="Permalink"></a></h2><p>StateSpaceModels.jl has an interface for <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.jl</a> algorithms. The models can be estimated using different algorithms and tunned to the user needs</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.fit!"><a class="docstring-binding" href="#StateSpaceModels.fit!"><code>StateSpaceModels.fit!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">fit!(
    model::StateSpaceModel;
    filter::KalmanFilter=default_filter(model),
    optimizer::Optimizer=Optimizer(Optim.LBFGS()),
    save_hyperparameter_distribution::Bool=true
)</code></pre><p>Estimate the state-space model parameters via maximum likelihood. The resulting optimal hyperparameters and the corresponding log-likelihood are stored within the model. You can choose the desired filter method (<code>UnivariateKalmanFilter</code>, <code>ScalarKalmanFilter</code>, etc.) and the <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.jl</a> optimization algortihm. </p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; model = LocalLevel(rand(100))
LocalLevel

julia&gt; fit!(model)
LocalLevel

julia&gt; model = LocalLinearTrend(LinRange(1, 100, 100) + rand(100))
LocalLinearTrend

julia&gt; fit!(model; optimizer = Optimizer(StateSpaceModels.Optim.NelderMead()))
LocalLinearTrend</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/fit.jl#L1-L28">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.Optimizer"><a class="docstring-binding" href="#StateSpaceModels.Optimizer"><code>StateSpaceModels.Optimizer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Optimizer</code></pre><p>An Optim.jl wrapper to make the choice of the optimizer straightforward in StateSpaceModels.jl Users can choose among all suitable Optimizers in Optim.jl using very similar syntax.</p><p><strong>Example</strong></p><pre><code class="language- hljs">julia&gt; using Optim

# use a semicolon to avoid displaying the big log
julia&gt; opt = Optimizer(Optim.LBFGS(), Optim.Options(show_trace = true));</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/optimizers.jl#L1-L14">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.print_results"><a class="docstring-binding" href="#StateSpaceModels.print_results"><code>StateSpaceModels.print_results</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">print_results(model::StateSpaceModel)</code></pre><p>Query the results of the optimization called by <code>fit!</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/prints.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.has_fit_methods"><a class="docstring-binding" href="#StateSpaceModels.has_fit_methods"><code>StateSpaceModels.has_fit_methods</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">has_fit_methods(model_type::Type{&lt;:StateSpaceModel}) -&gt; Bool</code></pre><p>Verify if a certain <code>StateSpaceModel</code> has the necessary methods to perform <code>fit!</code>`.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/fit.jl#L76-L80">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.isfitted"><a class="docstring-binding" href="#StateSpaceModels.isfitted"><code>StateSpaceModels.isfitted</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">isfitted(model::StateSpaceModel) -&gt; Bool</code></pre><p>Verify if <code>model</code> is fitted, i.e., returns <code>false</code> if there is at least one <code>NaN</code> entry in the hyperparameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/hyperparameters.jl#L300-L305">source</a></section></details></article><h2 id="Forecasting-and-simulating"><a class="docs-heading-anchor" href="#Forecasting-and-simulating">Forecasting and simulating</a><a id="Forecasting-and-simulating-1"></a><a class="docs-heading-anchor-permalink" href="#Forecasting-and-simulating" title="Permalink"></a></h2><p>StateSpaceModels.jl has functions to make forecasts of the predictive densities multiple steps ahead and to simulate scenarios based on those forecasts. The package also has a functions to benchmark the model forecasts  using cross_validation techniques.</p><article><details class="docstring" open="true"><summary id="StateSpaceModels.forecast"><a class="docstring-binding" href="#StateSpaceModels.forecast"><code>StateSpaceModels.forecast</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">forecast(model::StateSpaceModel, steps_ahead::Int; kwargs...)
forecast(model::StateSpaceModel, exogenous::Matrix{Fl}; kwargs...) where Fl</code></pre><p>Forecast the mean and covariance for future observations from a StateSpaceModel.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/forecast.jl#L10-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.simulate_scenarios"><a class="docstring-binding" href="#StateSpaceModels.simulate_scenarios"><code>StateSpaceModels.simulate_scenarios</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">simulate_scenarios(
    model::StateSpaceModel, steps_ahead::Int, n_scenarios::Int;
    filter::KalmanFilter=default_filter(model)
) -&gt; Array{&lt;:AbstractFloat, 3}</code></pre><p>Samples <code>n_scenarios</code> future scenarios via Monte Carlo simulation for <code>steps_ahead</code> using the desired <code>filter</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/forecast.jl#L105-L113">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.cross_validation"><a class="docstring-binding" href="#StateSpaceModels.cross_validation"><code>StateSpaceModels.cross_validation</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">cross_validation(model::StateSpaceModel, steps_ahead::Int, start_idx::Int;
         n_scenarios::Int = 10_000,
         filter::KalmanFilter=default_filter(model),
         optimizer::Optimizer=default_optimizer(model)) where Fl</code></pre><p>Makes rolling window estimating and forecasting to benchmark the forecasting skill of the model in for different time periods and different lead times. The function returns a struct with the MAE and mean CRPS per lead time. See more on <a href="../examples/#Cross-validation-of-the-forecasts-of-a-model">Cross validation of the forecasts of a model</a></p><p><strong>References</strong></p><ul><li>DTU course &quot;31761 - Renewables in electricity markets&quot; available on youtube https://www.youtube.com/watch?v=Ffo8XilZAZw&amp;t=556s</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/cross_validation.jl#L36-L48">source</a></section></details></article><h2 id="Visualization"><a class="docs-heading-anchor" href="#Visualization">Visualization</a><a id="Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization" title="Permalink"></a></h2><p>Some user friendly plot recipes are defined using <a href="https://github.com/JuliaPlots/RecipesBase.jl">RecipesBase.jl</a>. If you have any suggestions do not hesitate to post it as an issue.</p><pre><code class="language-julia hljs">using StateSpaceModels, CSV, DataFrames, Plots

air_passengers = CSV.File(StateSpaceModels.AIR_PASSENGERS) |&gt; DataFrame
log_air_passengers = log.(air_passengers.passengers)

model = BasicStructural(log_air_passengers, 12)
fit!(model)
forec = forecast(model, 24)

plot(model, forec; legend = :topleft)</code></pre><img src="cc64252a.svg" alt="Example block output"/><pre><code class="language-julia hljs">using StateSpaceModels, CSV, DataFrames, Plots

finland_fatalities = CSV.File(StateSpaceModels.VEHICLE_FATALITIES) |&gt; DataFrame
log_finland_fatalities = log.(finland_fatalities.ff)
model = UnobservedComponents(log_finland_fatalities; trend = &quot;local linear trend&quot;)
fit!(model)
ks = kalman_smoother(model)

plot(model, ks)</code></pre><img src="70715cbe.svg" alt="Example block output"/><pre><code class="language-julia hljs">using StateSpaceModels, CSV, DataFrames, Plots

nile = CSV.File(StateSpaceModels.NILE) |&gt; DataFrame
model = UnobservedComponents(nile.flow; trend = &quot;local level&quot;, cycle = &quot;stochastic&quot;)
fit!(model)
kf = kalman_filter(model)

plotdiagnostics(kf)</code></pre><img src="02d7b6b9.svg" alt="Example block output"/><h2 id="Datasets"><a class="docs-heading-anchor" href="#Datasets">Datasets</a><a id="Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Datasets" title="Permalink"></a></h2><p>The package provides some datasets to illustrate the funtionalities and models. These datasets are stored as csv files and the path to these files can be obtained through their names as seen below. In the examples we illustrate the datasets using <a href="https://github.com/JuliaData/DataFrames.jl">DataFrames.jl</a> and <a href="https://github.com/JuliaData/CSV.jl">CSV.jl</a></p><article><details class="docstring" open="true"><summary id="StateSpaceModels.AIR_PASSENGERS"><a class="docstring-binding" href="#StateSpaceModels.AIR_PASSENGERS"><code>StateSpaceModels.AIR_PASSENGERS</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">AIR_PASSENGERS</code></pre><p>The absolute path for the <code>AIR_PASSENGERS</code> dataset stored inside StateSpaceModels.jl. This dataset provides monthly totals of a US airline passengers from 1949 to 1960.</p><p>See more on <a href="../examples/#Airline-passengers">Airline passengers</a></p><p><strong>References</strong></p><ul><li>https://www.stata-press.com/data/r12/ts.html</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L17-L27">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.FRONT_REAR_SEAT_KSI"><a class="docstring-binding" href="#StateSpaceModels.FRONT_REAR_SEAT_KSI"><code>StateSpaceModels.FRONT_REAR_SEAT_KSI</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">FRONT_REAR_SEAT_KSI</code></pre><p>The absolute path for the <code>FRONT_REAR_SEAT_KSI</code> dataset stored inside StateSpaceModels.jl. This dataset provides the log of british people killed or serious injuried in road accidents accross UK.</p><p><strong>References</strong></p><ul><li>Commandeur, Jacques J.F. &amp; Koopman, Siem Jan, 2007. &quot;An Introduction to State Space Time  Series Analysis,&quot; OUP Catalogue, Oxford University Press (Chapter 3)</li><li>http://staff.feweb.vu.nl/koopman/projects/ckbook/OxCodeAll.zip</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L68-L79">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.INTERNET"><a class="docstring-binding" href="#StateSpaceModels.INTERNET"><code>StateSpaceModels.INTERNET</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">INTERNET</code></pre><p>The absolute path for the <code>INTERNET</code> dataset stored inside StateSpaceModels.jl. This dataset provides the number of users logged on to an Internet server each minute over 100 minutes.</p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods:  Second Edition.&quot; Oxford University Press. (Chapter 9)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L30-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.NILE"><a class="docstring-binding" href="#StateSpaceModels.NILE"><code>StateSpaceModels.NILE</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">NILE</code></pre><p>The absolute path for the <code>NILE</code> dataset stored inside StateSpaceModels.jl. This dataset provides measurements of the annual flow of the Nile river at Aswan from 1871 to 1970, in <span>$10^8 m^3$</span>.</p><p>See more on <a href="../examples/#Nile-river-annual-flow">Nile river annual flow</a></p><p><strong>References</strong></p><ul><li>Durbin, James, &amp; Siem Jan Koopman. (2012). &quot;Time Series Analysis by State Space Methods: Second Edition.&quot; Oxford University Press. (Chapter 2)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L3-L14">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.RJ_TEMPERATURE"><a class="docstring-binding" href="#StateSpaceModels.RJ_TEMPERATURE"><code>StateSpaceModels.RJ_TEMPERATURE</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">RJ_TEMPERATURE</code></pre><p>Weekly mean temperature in Rio de Janeiro in Kelvin (K).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L82-L86">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.VEHICLE_FATALITIES"><a class="docstring-binding" href="#StateSpaceModels.VEHICLE_FATALITIES"><code>StateSpaceModels.VEHICLE_FATALITIES</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">VEHICLE_FATALITIES</code></pre><p>The absolute path for the <code>VEHICLE_FATALITIES</code> dataset stored inside StateSpaceModels.jl. This dataset provides the number of annual road traffic fatalities in Norway and Finland.</p><p>See more on <a href="../examples/#Finland-road-traffic-fatalities">Finland road traffic fatalities</a></p><p><strong>References</strong></p><ul><li>Commandeur, Jacques J.F. &amp; Koopman, Siem Jan, 2007. &quot;An Introduction to State Space Time  Series Analysis,&quot; OUP Catalogue, Oxford University Press (Chapter 3)</li><li>http://staff.feweb.vu.nl/koopman/projects/ckbook/OxCodeAll.zip</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L51-L63">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.WHOLESALE_PRICE_INDEX"><a class="docstring-binding" href="#StateSpaceModels.WHOLESALE_PRICE_INDEX"><code>StateSpaceModels.WHOLESALE_PRICE_INDEX</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">WHOLESALE_PRICE_INDEX</code></pre><p>TODO</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L42-L46">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.US_CHANGE"><a class="docstring-binding" href="#StateSpaceModels.US_CHANGE"><code>StateSpaceModels.US_CHANGE</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">US_CHANGE</code></pre><p>Percentage changes in quarterly personal consumption expenditure, personal disposable income, production, savings and the unemployment rate for the US, 1960 to 2016.</p><p>Federal Reserve Bank of St Louis.</p><p><strong>References</strong></p><ul><li>Hyndman, Rob J., Athanasopoulos, George. &quot;Forecasting: Principles and Practice&quot;</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L89-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="StateSpaceModels.SUNSPOTS_YEAR"><a class="docstring-binding" href="#StateSpaceModels.SUNSPOTS_YEAR"><code>StateSpaceModels.SUNSPOTS_YEAR</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">SUNSPOTS_YEAR</code></pre><p>Yearly numbers of sunspots from 1700 to 1988 (rounded to one digit). Federal Reserve Bank of St Louis.</p><p><strong>References</strong></p><ul><li>H. Tong (1996) Non-Linear Time Series. Clarendon Press, Oxford, p. 471.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LAMPSPUC/StateSpaceModels.jl/blob/2d862abbb24b3c093db1cdce89ff3714df13ace0/src/datasets.jl#L102-L110">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 1 February 2026 02:26">Sunday 1 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
